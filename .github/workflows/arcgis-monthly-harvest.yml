# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

name: ArcGIS Hubs Regular Scan
on:
  workflow_dispatch:
#   schedule:
#     - cron: 30 13 * * 2

jobs:
  create_issue:
    name: Scan ArcGIS Hubs
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Create issue
        uses: imjohnbo/issue-bot@3d96848fb5e9a4a473bb81ae62b4b4866a56e93a
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          env:
          TIME: "${{ steps.current-time.outputs.time }}"
          R_TIME: "${{ steps.current-time.outputs.readableTime }}"
          F_TIME: "${{ steps.current-time.outputs.formattedTime }}"
          YEAR: "${{ steps.current-time.outputs.year }}"
          DAY: "${{ steps.current-time.outputs.day }}"
        with:
          assignees: "karenmajewicz"
          labels: "New records"
          title: ${{ DAY }}-Harvest ArcGIS Hubs
          project: 4
          body: |
            ### To do

            - [ ] Download list of ArcGIS Hubs
            - [ ] Run scan
            - [ ] Upload new items to GEOMG
            - [ ] Unpublish retired items
          pinned: false
          close-previous: false
        
